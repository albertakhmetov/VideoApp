<UserControl
    x:Class="VideoApp.Views.PlayerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VideoApp.Views"
    xmlns:vlc="using:LibVLCSharp.Platforms.Windows"
    xmlns:converters="using:VideoApp.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid x:Name="Root">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal">
                    <Storyboard>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="HiddenControlPanel">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0.1" To="0"
                                         Storyboard.TargetProperty="Opacity" 
                                         Storyboard.TargetName="ControlPanel"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="Notifications">
                <VisualState x:Name="NoNotifications">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0.1" To="0"
                                         Storyboard.TargetProperty="Opacity" 
                                         Storyboard.TargetName="VolumeOsd"/>
                        <DoubleAnimation Duration="0:0:0.1" To="0"
                                         Storyboard.TargetProperty="Opacity" 
                                         Storyboard.TargetName="SkipOsd"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="VolumeNotification">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0.15" To="1"
                                         Storyboard.TargetProperty="Opacity" 
                                         Storyboard.TargetName="VolumeOsd"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="SkipNotification">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0.15"
                                         To="1"
                                         Storyboard.TargetProperty="Opacity" 
                                         Storyboard.TargetName="SkipOsd"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <vlc:VideoView Name="VideoControl"
                       Initialized="VideoView_Initialized"/>

        <Grid
            Visibility="{x:Bind converters:Helpers.VisibleIfNot(ViewModel.IsPlaying), Mode=OneWay}"
            Background="Black" />

        <Border Name="VolumeOsd"
                Opacity="0"
                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16,6"
                Margin="8"
                VerticalAlignment="Top"
                HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal">
                <FontIcon Margin="0,4,0,0"  
                          VerticalAlignment="Center"
                          Glyph="{x:Bind converters:Helpers.ToVolumeIcon(ViewModel.Volume), Mode=OneWay}" />
                <TextBlock Text="{x:Bind ViewModel.Volume, Mode=OneWay}"
                           Margin="10,0,0,0"
                           MinWidth="45"
                           TextAlignment="Right"
                           VerticalAlignment="Center"
                           Style="{ThemeResource TitleTextBlockStyle}"/>

            </StackPanel>
        </Border>

        <Border Name="SkipOsd"
                Opacity="0"
                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16,6"
                Margin="8"
                VerticalAlignment="Top"
                HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal">
                <FontIcon Name="SkipOsdIcon"
                          Margin="0,4,0,0"  
                          VerticalAlignment="Center" />
                <TextBlock Margin="10,0,0,0"
                           MinWidth="170"
                           TextAlignment="Right"
                           VerticalAlignment="Center">
                    <Run FontSize="28"
                         Text="{x:Bind converters:Helpers.ToString(ViewModel.Position), Mode=OneWay}"/>
                    <Run FontSize="28"
                         Text="/"/>
                    <Run FontSize="14"
                         Text="{x:Bind converters:Helpers.ToString(ViewModel.Duration), Mode=OneWay}"/>
                </TextBlock>

            </StackPanel>
        </Border>

        <Border x:Name="ControlPanel"
                MaxWidth="800"
                Margin="8"
                VerticalAlignment="Bottom"
                IsTabStop="False"
                Tapped="ControlPanel_Tapped"
                DoubleTapped="ControlPanel_DoubleTapped"
                Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}"
                BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="4,4"/>
    </Grid>
</UserControl>
